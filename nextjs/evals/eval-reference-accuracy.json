{
  "skill": "nextjs",
  "eval_name": "eval-reference-accuracy",
  "description": "Verify reference files provide accurate, complete Next.js 16 documentation.",
  "tests": [
    {
      "id": "route-handler-caching",
      "name": "Route Handler caching rules are correct",
      "prompt": "Are GET route handlers cached by default?",
      "input_files": ["references/getting-started/route-handlers.md"],
      "expectations": [
        "States GET handlers are NOT cached by default",
        "Mentions force-static to opt in",
        "States other methods are never cached",
        "Mentions use cache must be in helper function, not handler body"
      ],
      "pass_criteria": "Correctly states no default caching for route handlers"
    },
    {
      "id": "generate-metadata-signature",
      "name": "generateMetadata has correct signature",
      "prompt": "What is the signature of generateMetadata?",
      "input_files": ["references/getting-started/metadata-and-og-images.md"],
      "expectations": [
        "params is Promise type (must await)",
        "searchParams is Promise type (must await)",
        "Returns Promise<Metadata>",
        "Second parameter is ResolvingMetadata (optional)"
      ],
      "pass_criteria": "Shows correct async generateMetadata with Promise params"
    },
    {
      "id": "server-action-security",
      "name": "Server Actions include security patterns",
      "prompt": "How do I create a secure server action?",
      "input_files": ["references/getting-started/updating-data.md"],
      "expectations": [
        "Uses 'use server' directive",
        "Mentions Zod validation",
        "Mentions revalidatePath or revalidateTag for cache invalidation",
        "Uses redirect() for post-action navigation"
      ],
      "pass_criteria": "Includes validation and proper cache invalidation"
    },
    {
      "id": "error-boundary-hierarchy",
      "name": "Error boundary hierarchy is correct",
      "prompt": "How does error handling work in Next.js App Router?",
      "input_files": ["references/getting-started/error-handling.md"],
      "expectations": [
        "Distinguishes expected errors (return values) from uncaught exceptions (error.tsx)",
        "error.tsx must be 'use client'",
        "global-error.tsx must define its own html/body",
        "Shows reset() function for retry"
      ],
      "pass_criteria": "Correctly describes two error categories and boundary hierarchy"
    },
    {
      "id": "image-optimization-config",
      "name": "Image config includes remotePatterns",
      "prompt": "How do I use remote images with next/image?",
      "input_files": ["references/getting-started/images.md"],
      "expectations": [
        "Shows remotePatterns in next.config.ts",
        "Includes protocol, hostname, pathname fields",
        "Mentions width/height required for remote (or use fill)",
        "Notes security: be as specific as possible"
      ],
      "pass_criteria": "Shows complete remotePatterns config with security note"
    }
  ]
}
