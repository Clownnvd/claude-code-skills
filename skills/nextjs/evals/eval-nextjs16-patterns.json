{
  "skill": "nextjs",
  "eval_name": "eval-nextjs16-patterns",
  "description": "Verify the skill provides correct Next.js 16 patterns and avoids deprecated Next.js 15 patterns.",
  "tests": [
    {
      "id": "use-cache-not-unstable-cache",
      "name": "Uses 'use cache' directive instead of unstable_cache",
      "prompt": "How do I cache data in a Next.js server component?",
      "expectations": [
        "Recommends 'use cache' directive",
        "Does NOT recommend unstable_cache",
        "Mentions cacheLife() for cache profiles",
        "Mentions cacheTag() for cache invalidation"
      ],
      "pass_criteria": "Response uses 'use cache' directive, not unstable_cache",
      "fail_indicators": ["unstable_cache", "import { unstable_cache }"]
    },
    {
      "id": "proxy-not-middleware",
      "name": "Uses proxy.ts instead of middleware.ts",
      "prompt": "How do I add auth checks before routes in Next.js?",
      "expectations": [
        "Recommends proxy.ts file",
        "Mentions Node.js runtime (not Edge)",
        "Uses NextRequest/NextResponse from next/server",
        "Shows config.matcher for path filtering"
      ],
      "pass_criteria": "Response recommends proxy.ts, not middleware.ts",
      "fail_indicators": ["middleware.ts", "Edge Runtime"]
    },
    {
      "id": "cache-components-not-experimental",
      "name": "Uses cacheComponents instead of experimental flags",
      "prompt": "How do I enable PPR in Next.js?",
      "expectations": [
        "Recommends cacheComponents: true in next.config.ts",
        "Does NOT use experimental.ppr or experimental.dynamicIO",
        "Mentions Suspense boundaries for dynamic content"
      ],
      "pass_criteria": "Response uses cacheComponents: true",
      "fail_indicators": ["experimental.ppr", "experimental.dynamicIO"]
    },
    {
      "id": "async-params-searchparams",
      "name": "Awaits params and searchParams (Promise-based)",
      "prompt": "How do I access route params in a Next.js page component?",
      "expectations": [
        "Shows params as Promise type",
        "Uses await to access params",
        "Shows searchParams as Promise type"
      ],
      "pass_criteria": "Response shows params/searchParams as Promises that must be awaited",
      "fail_indicators": ["params.slug (without await)", "synchronous params access"]
    },
    {
      "id": "react-compiler-not-experimental",
      "name": "Uses top-level reactCompiler config",
      "prompt": "How do I enable React Compiler in Next.js?",
      "expectations": [
        "Shows reactCompiler: true at top level of next.config.ts",
        "Does NOT use experimental.reactCompiler"
      ],
      "pass_criteria": "Response uses top-level reactCompiler: true",
      "fail_indicators": ["experimental.reactCompiler"]
    },
    {
      "id": "tailwind-v4-syntax",
      "name": "Uses Tailwind CSS 4 syntax",
      "prompt": "How do I set up Tailwind CSS in Next.js?",
      "expectations": [
        "Uses @import 'tailwindcss' in globals.css",
        "Uses @theme for custom values",
        "Uses bg-linear-to-r (not bg-gradient-to-r)"
      ],
      "pass_criteria": "Response uses Tailwind CSS 4 syntax",
      "fail_indicators": ["tailwind.config.js", "bg-gradient-to-r"]
    }
  ]
}
